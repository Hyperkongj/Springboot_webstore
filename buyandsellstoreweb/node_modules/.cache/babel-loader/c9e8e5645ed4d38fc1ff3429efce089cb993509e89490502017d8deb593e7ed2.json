{"ast":null,"code":"var _jsxFileName = \"D:\\\\Adv_soft_Eng\\\\project_1\\\\CS5394.Group3\\\\buyandsellstoreweb\\\\src\\\\screens\\\\LoginScreen.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useUserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LOGIN_MUTATION = gql`\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      success\n      message\n      user {\n        id\n        username\n        email\n        firstName\n        lastName\n        isSeller\n        phone\n        billing {\n          type\n          street\n          city\n          state\n          zip\n          country\n        }\n        shipping {\n          type\n          street\n          city\n          state\n          zip\n          country\n        }\n      }\n    }\n  }\n`;\nconst LoginScreen = () => {\n  _s();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const {\n    login: setUser\n  } = useUserContext(); // Access login from UserContext\n  const [login, {\n    loading\n  }] = useMutation(LOGIN_MUTATION);\n  const navigate = useNavigate();\n  const handleLogin = async e => {\n    e.preventDefault();\n    setErrorMessage(\"\"); // Clear previous error message\n\n    try {\n      const response = await login({\n        variables: {\n          username,\n          password\n        }\n      });\n      if (response.data.login.success) {\n        // Set user data in context\n        setUser(response.data.login.user);\n        navigate(\"/home\"); // Redirect to home screen\n      } else {\n        setErrorMessage(response.data.login.message); // Display error message\n      }\n    } catch (error) {\n      console.error(error);\n      setErrorMessage(\"An error occurred during login. Please try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleLogin,\n      style: styles.form,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        value: username,\n        onChange: e => setUsername(e.target.value),\n        required: true,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true,\n        style: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: styles.button,\n        disabled: loading,\n        children: loading ? \"Logging in...\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.error,\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 24\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.forgotPassword,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/forgotpassword\"),\n        style: styles.forgotPasswordButton,\n        children: \"Forgot Password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles.signupText,\n      children: [\"Don't have an account?\", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/signup\"),\n        style: styles.signupButton,\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginScreen, \"tvV4qDY0+SHiJu/OSLwTcdlqCuY=\", false, function () {\n  return [useUserContext, useMutation, useNavigate];\n});\n_c = LoginScreen;\nconst styles = {\n  container: {\n    maxWidth: \"400px\",\n    margin: \"50px auto\",\n    textAlign: \"center\"\n  },\n  form: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"10px\"\n  },\n  input: {\n    padding: \"10px\",\n    fontSize: \"16px\",\n    borderRadius: \"5px\",\n    border: \"1px solid #ccc\"\n  },\n  button: {\n    padding: \"10px\",\n    background: \"#007BFF\",\n    color: \"#fff\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\"\n  },\n  error: {\n    color: \"red\",\n    marginTop: \"10px\"\n  },\n  // Error message styling\n  forgotPassword: {\n    marginTop: \"15px\",\n    fontSize: \"14px\"\n  },\n  forgotPasswordButton: {\n    background: \"none\",\n    border: \"none\",\n    color: \"#007BFF\",\n    textDecoration: \"underline\",\n    cursor: \"pointer\",\n    padding: \"0\",\n    fontSize: \"14px\"\n  },\n  signupText: {\n    marginTop: \"15px\",\n    fontSize: \"14px\",\n    color: \"#333\"\n  },\n  signupButton: {\n    background: \"none\",\n    border: \"none\",\n    color: \"#007BFF\",\n    textDecoration: \"underline\",\n    cursor: \"pointer\",\n    padding: \"0\"\n  }\n};\nexport default LoginScreen;\nvar _c;\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"names":["React","useState","useMutation","gql","useNavigate","useUserContext","jsxDEV","_jsxDEV","LOGIN_MUTATION","LoginScreen","_s","username","setUsername","password","setPassword","errorMessage","setErrorMessage","login","setUser","loading","navigate","handleLogin","e","preventDefault","response","variables","data","success","user","message","error","console","style","styles","container","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","form","type","placeholder","value","onChange","target","required","input","button","disabled","forgotPassword","onClick","forgotPasswordButton","signupText","signupButton","_c","maxWidth","margin","textAlign","display","flexDirection","gap","padding","fontSize","borderRadius","border","background","color","cursor","marginTop","textDecoration","$RefreshReg$"],"sources":["D:/Adv_soft_Eng/project_1/CS5394.Group3/buyandsellstoreweb/src/screens/LoginScreen.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useMutation, gql } from \"@apollo/client\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useUserContext } from \"../context/UserContext\";\r\n\r\nconst LOGIN_MUTATION = gql`\r\n  mutation Login($username: String!, $password: String!) {\r\n    login(username: $username, password: $password) {\r\n      success\r\n      message\r\n      user {\r\n        id\r\n        username\r\n        email\r\n        firstName\r\n        lastName\r\n        isSeller\r\n        phone\r\n        billing {\r\n          type\r\n          street\r\n          city\r\n          state\r\n          zip\r\n          country\r\n        }\r\n        shipping {\r\n          type\r\n          street\r\n          city\r\n          state\r\n          zip\r\n          country\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nconst LoginScreen = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const { login: setUser } = useUserContext(); // Access login from UserContext\r\n  const [login, { loading }] = useMutation(LOGIN_MUTATION);\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setErrorMessage(\"\"); // Clear previous error message\r\n\r\n    try {\r\n      const response = await login({ variables: { username, password } });\r\n\r\n      if (response.data.login.success) {\r\n        // Set user data in context\r\n        setUser(response.data.login.user);\r\n\r\n        navigate(\"/home\"); // Redirect to home screen\r\n      } else {\r\n        setErrorMessage(response.data.login.message); // Display error message\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setErrorMessage(\"An error occurred during login. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h1>Login</h1>\r\n      <form onSubmit={handleLogin} style={styles.form}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          required\r\n          style={styles.input}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n          style={styles.input}\r\n        />\r\n        <button type=\"submit\" style={styles.button} disabled={loading}>\r\n          {loading ? \"Logging in...\" : \"Login\"}\r\n        </button>\r\n      </form>\r\n      {errorMessage && <p style={styles.error}>{errorMessage}</p>} {/* Error message */}\r\n      <p style={styles.forgotPassword}>\r\n        <button\r\n          onClick={() => navigate(\"/forgotpassword\")}\r\n          style={styles.forgotPasswordButton}\r\n        >\r\n          Forgot Password?\r\n        </button>\r\n      </p>\r\n      <p style={styles.signupText}>\r\n        Don't have an account?{\" \"}\r\n        <button\r\n          onClick={() => navigate(\"/signup\")}\r\n          style={styles.signupButton}\r\n        >\r\n          Sign Up\r\n        </button>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: { maxWidth: \"400px\", margin: \"50px auto\", textAlign: \"center\" },\r\n  form: { display: \"flex\", flexDirection: \"column\", gap: \"10px\" },\r\n  input: { padding: \"10px\", fontSize: \"16px\", borderRadius: \"5px\", border: \"1px solid #ccc\" },\r\n  button: {\r\n    padding: \"10px\",\r\n    background: \"#007BFF\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"5px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  error: { color: \"red\", marginTop: \"10px\" }, // Error message styling\r\n  forgotPassword: { marginTop: \"15px\", fontSize: \"14px\" },\r\n  forgotPasswordButton: {\r\n    background: \"none\",\r\n    border: \"none\",\r\n    color: \"#007BFF\",\r\n    textDecoration: \"underline\",\r\n    cursor: \"pointer\",\r\n    padding: \"0\",\r\n    fontSize: \"14px\",\r\n  },\r\n  signupText: { marginTop: \"15px\", fontSize: \"14px\", color: \"#333\" },\r\n  signupButton: {\r\n    background: \"none\",\r\n    border: \"none\",\r\n    color: \"#007BFF\",\r\n    textDecoration: \"underline\",\r\n    cursor: \"pointer\",\r\n    padding: \"0\",\r\n  },\r\n};\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}